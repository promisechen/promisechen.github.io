

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1. 如何用sphinx+reST编写文档 &mdash; 陈令祥文档系统 1.5.3 文档</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/my_theme.css" type="text/css" />
  

  
    <link rel="top" title="陈令祥文档系统 1.5.3 文档" href="../index.html"/>
        <link rel="up" title="文档编写指南" href="index.html"/>
        <link rel="next" title="2. 目录结构" href="dir_struct.html"/>
        <link rel="prev" title="文档编写指南" href="index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> 陈令祥文档系统
          

          
            
            <img src="../_static/haohan_logo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.5.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">文档编写指南</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">1. 如何用sphinx+reST编写文档</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">1.1. 前言</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">1.2. 安装软件包</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">1.3. 项目建立</a></li>
<li class="toctree-l3"><a class="reference internal" href="#conf-py">1.4. conf.py配置</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">1.4.1. 主题样式</a></li>
<li class="toctree-l4"><a class="reference internal" href="#logo">1.4.2. LOGO</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">1.4.3. 不显示源文件链接</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#index">1.5. index页配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">1.6. 修改默认样式</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#step1">1.6.1. Step1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step2">1.6.2. Step2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step3">1.6.3. Step3</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#api">1.7. 生成API文档</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">1.7.1. Step1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">1.7.2. Step2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">1.7.3. Step3</a></li>
<li class="toctree-l4"><a class="reference internal" href="#step4">1.7.4. Step4</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#pdf">1.8. 生成PDF</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rest">1.9. reST语法介绍</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id10">1.9.1. 章节标题</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">1.9.2. 段落</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">1.9.3. 行内标记</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">1.9.4. 列表</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id14">1.9.5. 代码</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id15">1.9.6. 超链接</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id16">1.9.7. 图片</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">1.9.8. 表格</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id18">1.9.9. 引用</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id19">1.9.10. 脚注</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id20">1.9.11. 提醒</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id21">1.9.12. 替换</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id22">1.10. 参考</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="dir_struct.html">2. 目录结构</a><ul>
<li class="toctree-l3"><a class="reference internal" href="dir_struct.html#id2">2.1. 概述</a></li>
<li class="toctree-l3"><a class="reference internal" href="dir_struct.html#xxx">2.2. 注意事项</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../kbase/index.html">技术知识</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../kbase/cunit.html">CUnit测试工具</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../kbase/cunit.html#id1">简介</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kbase/cunit.html#id2">安装配置</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../kbase/cunit.html#ubuntu">Ubuntu</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/cunit.html#id3">从源码编译</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../kbase/cunit.html#id4">输出方式</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../kbase/cunit.html#void-cu-automated-run-tests-void">void CU_automated_run_tests(void)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/cunit.html#cu-errorcode-cu-list-tests-to-file-void">CU_ErrorCode CU_list_tests_to_file(void)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/cunit.html#void-cu-set-output-filename-const-char-szfilenameroot">void CU_set_output_filename(const char* szFilenameRoot)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../kbase/cunit.html#id5">断言</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kbase/cunit.html#id6">错误处理</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kbase/cunit.html#id7">参考</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../kbase/gdb.html">gdb速查手册</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../kbase/gdb.html#id1">常用命令</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../kbase/gdb.html#id2">常见汇编指令</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../kbase/gdb.html#id3">调试技巧</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../kbase/gdb.html#id4">图形界面使用</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/gdb.html#id5">内存断点</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/gdb.html#id6">启动自加载断点</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/gdb.html#dmesg">通过dmesg查看段错误位置</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../kbase/gdb.html#c">定位到c代码</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kbase/netalgo/index.html">网络算法学</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../kbase/netalgo/proto_process.html">9 Protocol Processing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../kbase/netalgo/proto_process.html#id1">9.1 缓存管理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/netalgo/proto_process.html#crcchecksum">9.2 CRC和Checksum</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/netalgo/proto_process.html#id4">9.3 通用协议处理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/netalgo/proto_process.html#id5">9.4 重组</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../kbase/netalgo/sched_packet.html">14 Scheduling Packets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../kbase/netalgo/sched_packet.html#id1">14.1 概述</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/netalgo/sched_packet.html#id2">14.2 拥塞控制</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/netalgo/sched_packet.html#id13">14.3 带宽与突发限制</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/netalgo/sched_packet.html#id24">14.4 多队列与优先级</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/netalgo/sched_packet.html#id25">14.5 资源预留协议</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/netalgo/sched_packet.html#id26">14.6 带宽保证</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/netalgo/sched_packet.html#id30">14.7 时延保证</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/netalgo/sched_packet.html#scalable-fair-queuing">14.8 Scalable Fair Queuing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/netalgo/sched_packet.html#dpdk">14.9 dpdk分层调度</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/netalgo/sched_packet.html#diffserv">14.10 DiffServ架构介绍</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/netalgo/sched_packet.html#dpdk-qos">14.11 dpdk QoS框架</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/netalgo/sched_packet.html#id37">附录</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/netalgo/sched_packet.html#id38">参考</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../kbase/ntp.html">NTP服务器客户端配置</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../kbase/ntp.html#id1">目的</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kbase/ntp.html#id2">读者</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kbase/ntp.html#id3">名词</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../kbase/ntp.html#id4">专有名词</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../kbase/ntp.html#id5">服务器/客户端配置</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../kbase/ntp.html#id6">服务器端配置</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/ntp.html#id7">客户端配置</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../kbase/ntp.html#id8">同步时间</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../kbase/ipmi.html">IPMI概述</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../kbase/ipmi.html#id1">1 简介</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kbase/ipmi.html#id2">2 名词解释</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kbase/ipmi.html#id3">3 主要功能</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kbase/ipmi.html#id4">4 IPMI管理工具</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../kbase/ipmi.html#id5">4.1 安装管理工具</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/ipmi.html#id6">4.2 加载IPMI内核</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../kbase/ipmi.html#id7">5 IPMI命令</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../kbase/ipmi.html#ipmitool">5.1 ipmitool命令</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/ipmi.html#id8">5.2 常用命令模板</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../kbase/ipmi.html#id9">6、远程管理</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../kbase/ipmi.html#bmc">6.1 设置BMC信息</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/ipmi.html#id10">6.2 配置用户</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/ipmi.html#id11">6.3 查看bmc信息</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/ipmi.html#id12">6.4 远程操作</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../kbase/redis.html">redis性能测试</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../kbase/redis.html#id1">1 测试说明</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../kbase/redis.html#id2">1.1 测试环境</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/redis.html#id3">1.2 测试用例</a></li>
<li class="toctree-l4"><a class="reference internal" href="../kbase/redis.html#id7">1.3.    测试总结</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dpdk/index.html">dpdk相关</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dpdk/init.html">log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dpdk/init.html#id1">样例</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id2">相关的外部接口及变量</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id3">函数调用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id4">主要接口描述</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dpdk/init.html#rte-eal-cpu-init">rte_eal_cpu_init</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id5">相关的外部接口及变量</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id6">函数调用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id7">主要接口描述</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dpdk/init.html#eal-parse-args">eal_parse_args</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id8">相关的外部接口和变量</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id9">函数调用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id10">主要接口描述</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dpdk/init.html#eal-hugepage-info-init">eal_hugepage_info_init</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id11">相关的外部接口及变量</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id12">函数调用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id13">主要接口描述</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dpdk/init.html#rte-config-init">rte_config_init</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id14">相关的外部接口及变量</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id15">函数调用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id16">主要接口描述</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dpdk/init.html#rte-eal-pci-init-todo">rte_eal_pci_init(todo)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id17">相关的外部接口及变量</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id18">函数调用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id19">主要接口描述</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dpdk/init.html#rte-eal-memory-init">rte_eal_memory_init</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id20">相关的外部接口及变量</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id21">函数调用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id22">主要接口描述</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dpdk/init.html#rte-eal-hugepage-init">rte_eal_hugepage_init</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id23">相关的外部接口及变量</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id24">函数调用</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/init.html#id25">主要接口描述</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dpdk/zp/index.html">DPDK Library</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/zp/eal.html">EAL</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/eal.html#linuxeal">Linux环境的EAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/eal.html#id1">内存机制与初始化</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/eal.html#cpu">CPU信息取得与核绑定</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/eal.html#lcore">线程/lcore的初始化与启动</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/eal.html#id2">多进程应用</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/eal.html#id3">其他注意事项</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/eal.html#id4">参考</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/zp/ring.html">Ring</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/ring.html#id1">概述</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/ring.html#id4">应用场景</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/ring.html#id5">无锁队列操作图解</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/ring.html#id6">数据结构</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/ring.html#id7">多生产者入队</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/ring.html#id8">多消费者出队</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/ring.html#id9">索引计算</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/ring.html#id10">参考</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/zp/mem.html">Memory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/mem.html#id1">内存的初始化</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/mem.html#id6">参考</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/zp/memseg.html">Memseg</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/memseg.html#id1">概述</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/memseg.html#id2">数据结构</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/memseg.html#id3">初始化</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/zp/memzone.html">Memzone</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/memzone.html#id1">概述</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/memzone.html#memzone-init">初始化</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/memzone.html#id3">内存分配</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/memzone.html#id4">内存释放</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/memzone.html#id5">参考</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/zp/malloc.html">Malloc</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/malloc.html#id1">概述</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/malloc.html#id2">数据结构</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/malloc.html#malloc-heap">malloc heap初始化</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/malloc.html#malloc-heap-alloc">内存分配</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/malloc.html#id4">内存释放</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/malloc.html#id5">参考</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/zp/mempool.html">Mempool</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/mempool.html#id1">概述</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/mempool.html#id2">特性</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/mempool.html#id4">数据结构</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/mempool.html#id5">创建</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/mempool.html#id6">取出对象</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/mempool.html#id7">还回对象</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/mempool.html#id8">参考</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../dpdk/zp/mbuf.html">Mbuf</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/mbuf.html#id1">概述</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/mbuf.html#id2">原理</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/mbuf.html#id3">数据结构</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/mbuf.html#id4">分配与回收</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/mbuf.html#id8">元信息</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/mbuf.html#directindirect-mbuf">Direct和Indirect mbuf</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dpdk/zp/mbuf.html#id9">参考</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../suricata/index.html">suricata</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../suricata/quick_start.html">快速使用</a></li>
<li class="toctree-l2"><a class="reference internal" href="../suricata/quick_start.html#id2">文件还原的简单实验</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../suricata/quick_start.html#id3">安装部署</a></li>
<li class="toctree-l3"><a class="reference internal" href="../suricata/quick_start.html#id4">配置</a></li>
<li class="toctree-l3"><a class="reference internal" href="../suricata/quick_start.html#id5">启动</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../suricata/review_4.0.1.html">suricata4.0.1源码分析</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../suricata/review_4.0.1.html#id1">约定</a></li>
<li class="toctree-l3"><a class="reference internal" href="../suricata/review_4.0.1.html#id2">概述及全局观览</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../suricata/review_4.0.1.html#id3">全局变量</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../suricata/review_4.0.1.html#main">main</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../suricata/review_4.0.1.html#runmoderegisterrunmodes">RunModeRegisterRunModes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../suricata/review_4.0.1.html#globalsinitpreconfig">GlobalsInitPreConfig</a></li>
<li class="toctree-l4"><a class="reference internal" href="../suricata/review_4.0.1.html#postconfloadedsetup">PostConfLoadedSetup</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../suricata/review_4.0.1.html#id4">开源引擎借鉴</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../suricata/review.html">源码笔记</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../suricata/review.html#id2">调试</a></li>
<li class="toctree-l3"><a class="reference internal" href="../suricata/review.html#tcp">tcp识别总体流程</a></li>
<li class="toctree-l3"><a class="reference internal" href="../suricata/review.html#flow">flow模块</a></li>
<li class="toctree-l3"><a class="reference internal" href="../suricata/review.html#id3">TCP重组</a></li>
<li class="toctree-l3"><a class="reference internal" href="../suricata/review.html#id4">协议识别</a></li>
<li class="toctree-l3"><a class="reference internal" href="../suricata/review.html#id5">应用识别</a></li>
<li class="toctree-l3"><a class="reference internal" href="../suricata/review.html#id6">协议解析</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">陈令祥文档系统</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">文档编写指南</a> &raquo;</li>
        
      <li>1. 如何用sphinx+reST编写文档</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="sphinx-rest">
<h1>1. 如何用sphinx+reST编写文档<a class="headerlink" href="#sphinx-rest" title="永久链接至标题">¶</a></h1>
<div class="section" id="id1">
<h2>1.1. 前言<a class="headerlink" href="#id1" title="永久链接至标题">¶</a></h2>
<p>写文档是开发人员日常工作中的一项重要内容，除了word之外，我更偏爱使用标记语言(Markup Language)。使用标记语言，可以利用简单、免费的文本编辑器(记事本，vim, emacs...）编写文档并设置格式，再生成html或pdf等格式，或者直接把编辑好的文件传到github或wiki上面 ，通过浏览器可以直接查看带有格式的文档。</p>
<p>目前标记语言主要有两种，Markdown和reStructuredText（简称reST)。该使用哪一种是一个见仁见智的选择，我在这里就不比较它们（包括其他标记语言）的优劣了，感兴趣的可以参考：</p>
<ul class="simple">
<li><a class="reference external" href="http://www.zhihu.com/question/19851600">知乎：Org-mode、reST、 Markdown 各有什么优缺点？</a></li>
<li><a class="reference external" href="https://en.wikipedia.org/wiki/Lightweight_markup_language">维基百科（英文）：Lightweight markup language </a></li>
</ul>
<p>对我个人来说，一开始尝试了一段时间的Markdown，由于工具不好用以及支持的格式不多的原因，转而使用reST，再配合sphinx，感觉好极了。</p>
<p>很多开源项目的文档就是用sphinx+reST做的，比如最近我正关注的hyperscan：<a class="reference external" href="http://01org.github.io/hyperscan/dev-reference/">http://01org.github.io/hyperscan/dev-reference/</a>。大家可以点进去看一下生成的效果，它用的样式是Alabaster 0.7.6。</p>
<p>本文以下内容均在Ubuntu 14.04上验证通过。</p>
</div>
<div class="section" id="id2">
<h2>1.2. 安装软件包<a class="headerlink" href="#id2" title="永久链接至标题">¶</a></h2>
<p>必须安装的软件包当然是sphinx了:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>sudo apt-get install python-pip
sudo pip install -U Sphinx
</pre></div>
</div>
<p>如果要从代码注释生成API文档，需要安装doxygen和breathe插件，后者可以让sphinx处理doxygen生成的xml:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>sudo apt-get install doxygen
sudo pip install breathe
</pre></div>
</div>
<p>如果要生成pdf文件，需要安装texlive:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>sudo apt-get install texlive-full
</pre></div>
</div>
<p>如果条生成中文pdf，则需要确认安装了必要的东亚语言和字体包，比如texlive-lang-cjk和texlive-fonts-recommended，可以参考<a class="reference external" href="http://www.tuicool.com/articles/nAJJVb">http://www.tuicool.com/articles/nAJJVb</a> 。</p>
</div>
<div class="section" id="id3">
<h2>1.3. 项目建立<a class="headerlink" href="#id3" title="永久链接至标题">¶</a></h2>
<p>最简单的方法是建立工作目录后（这里是doc），在其中运行sphinx-quickstart。运行此命令后sphinx会问你一些问题，根据情况回答即可。在这里我建立了一个名为foo的Project，版本是1.0，作者名为zzq，将source与build目录放开，其他都选默认:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>zzq@vmware:~/doc$ sphinx-quickstart
Welcome to the Sphinx 1.3.3 quickstart utility.

Please enter values for the following settings (just press Enter to
accept a default value, if one is given in brackets).

Enter the root path for documentation.
&gt; Root path for the documentation [.]:

You have two options for placing the build directory for Sphinx output.
Either, you use a directory &quot;_build&quot; within the root path, or you separate
&quot;source&quot; and &quot;build&quot; directories within the root path.
&gt; Separate source and build directories (y/n) [n]: y

Inside the root directory, two more directories will be created; &quot;_templates&quot;
for custom HTML templates and &quot;_static&quot; for custom stylesheets and other static
files. You can enter another prefix (such as &quot;.&quot;) to replace the underscore.
&gt; Name prefix for templates and static dir [_]:

The project name will occur in several places in the built documentation.
&gt; Project name: foo
&gt; Author name(s): zzq

Sphinx has the notion of a &quot;version&quot; and a &quot;release&quot; for the
software. Each version can have multiple releases. For example, for
Python the version is something like 2.5 or 3.0, while the release is
something like 2.5.1 or 3.0a1.  If you don&#39;t need this dual structure,
just set both to the same value.
&gt; Project version: 1.0
&gt; Project release [1.0]:

If the documents are to be written in a language other than English,
you can select a language here by its language code. Sphinx will then
translate text that it generates into that language.

For a list of supported codes, see
http://sphinx-doc.org/config.html#confval-language.
&gt; Project language [en]:

The file name suffix for source files. Commonly, this is either &quot;.txt&quot;
or &quot;.rst&quot;.  Only files with this suffix are considered documents.
&gt; Source file suffix [.rst]:

One document is special in that it is considered the top node of the
&quot;contents tree&quot;, that is, it is the root of the hierarchical structure
of the documents. Normally, this is &quot;index&quot;, but if your &quot;index&quot;
document is a custom template, you can also set this to another filename.
&gt; Name of your master document (without suffix) [index]:

Sphinx can also add configuration for epub output:
&gt; Do you want to use the epub builder (y/n) [n]:

Please indicate if you want to use one of the following Sphinx extensions:
&gt; autodoc: automatically insert docstrings from modules (y/n) [n]:
&gt; doctest: automatically test code snippets in doctest blocks (y/n) [n]:
&gt; intersphinx: link between Sphinx documentation of different projects (y/n) [n]:
&gt; todo: write &quot;todo&quot; entries that can be shown or hidden on build (y/n) [n]:
&gt; coverage: checks for documentation coverage (y/n) [n]:
&gt; pngmath: include math, rendered as PNG images (y/n) [n]:
&gt; mathjax: include math, rendered in the browser by MathJax (y/n) [n]:
&gt; ifconfig: conditional inclusion of content based on config values (y/n) [n]:
&gt; viewcode: include links to the source code of documented Python objects (y/n) [n]:

A Makefile and a Windows command file can be generated for you so that you
only have to run e.g. `make html&#39; instead of invoking sphinx-build
directly.
&gt; Create Makefile? (y/n) [y]:
&gt; Create Windows command file? (y/n) [y]:

Creating file ./source/conf.py.
Creating file ./source/index.rst.
Creating file ./Makefile.
Creating file ./make.bat.

Finished: An initial directory structure has been created.

You should now populate your master file ./source/index.rst and create other documentation
source files. Use the Makefile to build the docs, like so:
   make builder
where &quot;builder&quot; is one of the supported builders, e.g. html, latex or linkcheck.
</pre></div>
</div>
<p>执行完以上命令上doc目录中有以下内容（根据执行sphinx-quickstart命令时对各问题的回答不同，下文的文件内容和文件名可能有所不同):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>build  make.bat  Makefile  source
</pre></div>
</div>
<p>其中source和build分别是源文件和编译生成文件的存放目录，Makefile和make.bat分别是Linux和Windows下的makefile。</p>
<p>source目录下有以下内容:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>conf.py  index.rst  _static  _templates
</pre></div>
</div>
<p>其中conf.py是配置文件，index.rst是主框架文件，_static是静态文件存放目录，比如可以放一些图片什么的，_templates是模板存放目录。</p>
<p>我们先创建2个文件intro.rst和sample.rst，在里面只写标题。这两个文件的内容分别是：</p>
<p>intro.rst:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>intro
=====
</pre></div>
</div>
<p>sample.rst:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>sammple
=======
</pre></div>
</div>
<p>然后编译index.rst，在toctree指导语句（directive）中加入刚才两个文件的文件名，后缀省略，路径是相对于源目录source的:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>Welcome to foo&#39;s documentation!
===============================

Contents:

.. toctree::
   :maxdepth: 2

   intro
   sample
</pre></div>
</div>
<p>此时，可以回到source的上一级目录（有Makefile的目录），运行make html，即可在build目录中生成HTML文件:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>zzq@vmware:~/doc/source$ cd ..
zzq@vmware:~/doc$ make html
sphinx-build -b html -d build/doctrees   source build/html
Running Sphinx v1.3.3
loading pickled environment... done
building [mo]: targets for 0 po files that are out of date
building [html]: targets for 2 source files that are out of date
updating environment: 0 added, 2 changed, 0 removed
reading sources... [100%] sample
looking for now-outdated files... none found
pickling environment... done
checking consistency... done
preparing documents... done
writing output... [100%] sample
generating indices... genindex
writing additional pages... search
copying static files... done
copying extra files... done
dumping search index in English (code: en) ... done
dumping object inventory... done
build succeeded.

Build finished. The HTML pages are in build/html.
</pre></div>
</div>
<p>编译成功后使用浏览器打开build/html目录下的index.html，是这样的:</p>
<img alt="../_images/doc_view.png" src="../_images/doc_view.png" />
<p>到此，一次典型的环境配置与html生成步骤就完成了。</p>
<p>如果觉得生成的html主题风格自己不喜欢，可以个性source/conf.py，找到:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># The theme to use for HTML and HTML Help pages.  See the documentation for</span>
<span class="c1"># a list of builtin themes.</span>
<span class="n">html_theme</span> <span class="o">=</span> <span class="s1">&#39;alabaster&#39;</span>
</pre></div>
</div>
<p>把alabaster改成其他主题名就好了 。内置的主题有不少，见：<a class="reference external" href="http://sphinx-doc.org/theming.html#builtin-themes">http://sphinx-doc.org/theming.html#builtin-themes</a></p>
</div>
<div class="section" id="conf-py">
<h2>1.4. conf.py配置<a class="headerlink" href="#conf-py" title="永久链接至标题">¶</a></h2>
<div class="section" id="id4">
<h3>1.4.1. 主题样式<a class="headerlink" href="#id4" title="永久链接至标题">¶</a></h3>
<p>设置alabaster主题只需在html_theme中设置名字即可:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">html_theme</span> <span class="o">=</span> <span class="s1">&#39;alabaster&#39;</span>
</pre></div>
</div>
<p>而要设置更美观的sphinx_rtd_theme主题，需要在文件头部加上:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sphinx_rtd_theme</span>
</pre></div>
</div>
<p>再设置html_theme:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">html_theme</span> <span class="o">=</span> <span class="s1">&#39;sphinx_rtd_theme&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="logo">
<h3>1.4.2. LOGO<a class="headerlink" href="#logo" title="永久链接至标题">¶</a></h3>
<p>在html_logo中设置图片文件路径:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">html_logo</span> <span class="o">=</span> <span class="s1">&#39;./logo.png&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h3>1.4.3. 不显示源文件链接<a class="headerlink" href="#id5" title="永久链接至标题">¶</a></h3>
<p>默认会在生成的html页中显示rst源文件链接，做如下设置后不显示:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">html_show_sourcelink</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="index">
<h2>1.5. index页配置<a class="headerlink" href="#index" title="永久链接至标题">¶</a></h2>
<p>主要是设置目录树:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>.. toctree::
    :maxdepth: 3
    :numbered:

    foo
    bar
</pre></div>
</div>
<p>maxdepth把index.html页中目录的标题显示深度限制设为3，numbered为编号。之后空一行，在下面列出各子文档，可以不加文件后缀。</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">在这里同样要注意代码对齐</p>
</div>
</div>
<div class="section" id="id6">
<h2>1.6. 修改默认样式<a class="headerlink" href="#id6" title="永久链接至标题">¶</a></h2>
<p>有时候我们会对内置样式不满意，这时候就需要修改css之类的东西。下面以修改spinx_rtd_theme样式的右侧内容宽度(默认宽度太小，较长的表格\
经常格式混乱)为例，说明修改默认样式的方法。</p>
<div class="section" id="step1">
<h3>1.6.1. Step1<a class="headerlink" href="#step1" title="永久链接至标题">¶</a></h3>
<p>在_static目录添加my_theme.css，内容如下。</p>
<div class="highlight-css"><div class="highlight"><pre><span></span><span class="k">@import</span> <span class="nt">url</span><span class="o">(</span><span class="s2">&quot;theme.css&quot;</span><span class="o">)</span><span class="p">;</span>

<span class="nc">.wy-nav-content</span> <span class="p">{</span>
    <span class="nb">max-width</span><span class="o">:</span> <span class="m">1080px</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="step2">
<h3>1.6.2. Step2<a class="headerlink" href="#step2" title="永久链接至标题">¶</a></h3>
<p>修改conf.py，添加以下函数。</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_stylesheet</span><span class="p">(</span><span class="s2">&quot;my_theme.css&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="step3">
<h3>1.6.3. Step3<a class="headerlink" href="#step3" title="永久链接至标题">¶</a></h3>
<p>重新编译文档即可。</p>
</div>
</div>
<div class="section" id="api">
<h2>1.7. 生成API文档<a class="headerlink" href="#api" title="永久链接至标题">¶</a></h2>
<p>可以配合使用sphinx+reST+breathe+doxygen来给代码生成API文档并无缝添加到已有的文档结构中。</p>
<div class="section" id="id7">
<h3>1.7.1. Step1<a class="headerlink" href="#id7" title="永久链接至标题">¶</a></h3>
<p>运行:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">doxygen</span> <span class="o">-</span><span class="n">g</span>
</pre></div>
</div>
<p>生成doxygen配置文件(默认文件名是Doxyfile)，然后修改此文件：</p>
<ul class="simple">
<li><strong>项目名称</strong> PROJECT_NAME = &#8220;MyProject&#8221;</li>
<li><strong>对C项目优化</strong> OPTIMIZE_OUTPUT_FOR_C  = YES</li>
<li><strong>源文件路径</strong> INPUT = /home/tom/project/include</li>
<li><strong>源文件编码</strong> INPUT_ENCODEING = UTF-8</li>
<li><strong>生成XML</strong> GENERATE_XML = YES
因为要使用breathe扩展，所以必须生成xml</li>
<li><strong>XML输出目录</strong> XML_OUTPUT = my_xml</li>
<li><strong>不需要生成html</strong> GENERATE_HTML = NO</li>
<li><strong>不需要生成latex</strong> GENERATE_LATEX = NO</li>
<li><strong>不显示包含文件</strong> SHOW_INCLUDE_FILES = NO</li>
</ul>
</div>
<div class="section" id="id8">
<h3>1.7.2. Step2<a class="headerlink" href="#id8" title="永久链接至标题">¶</a></h3>
<p>运行:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">doxygen</span> <span class="p">[</span><span class="n">Doxyfile</span><span class="p">]</span>
</pre></div>
</div>
<p>输出注释，主要是xml。</p>
</div>
<div class="section" id="id9">
<h3>1.7.3. Step3<a class="headerlink" href="#id9" title="永久链接至标题">¶</a></h3>
<p>配置conf.py，以支持breathe扩展。前提是这一扩展已经安装。</p>
<p>加入扩展:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;breathe&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>配置breathe:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">breathe_projects</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;myproject&quot;</span><span class="p">:</span> <span class="s2">&quot;./my_xml&quot;</span> <span class="p">}</span>
<span class="n">breathe_default_project</span> <span class="o">=</span> <span class="s2">&quot;myproject&quot;</span>
<span class="n">breathe_domain_by_extension</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;h&quot;</span> <span class="p">:</span> <span class="s2">&quot;c&quot;</span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="step4">
<h3>1.7.4. Step4<a class="headerlink" href="#step4" title="永久链接至标题">¶</a></h3>
<p>按breathe扩展语法编写rst文件，比如:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>My API
==========

sp.h
----

.. doxygenfile:: sp.h
</pre></div>
</div>
<p>上面的语句为项目中的sp.h接口文件生成了html文档。</p>
<p>最后，运行 <code class="docutils literal"><span class="pre">make</span> <span class="pre">html</span></code> 生成html即可。</p>
<p>在这些步骤中，需要先调用doxygen生成xml，再调用sphinx-build(make html时自动调用)生成最终文档，如果想一步完成，可以在Makefile中加入doxygen调用:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>html:
-&gt;&gt;&gt;doxygen Doxyfile
-&gt;&gt;&gt;$(SPHINXBUILD) -b html $(ALLSPHINXOPTS) $(BUILDDIR)/html
-&gt;&gt;&gt;@echo
-&gt;&gt;&gt;@echo &quot;Build finished. The HTML pages are in $(BUILDDIR)/html.&quot;
</pre></div>
</div>
</div>
</div>
<div class="section" id="pdf">
<h2>1.8. 生成PDF<a class="headerlink" href="#pdf" title="永久链接至标题">¶</a></h2>
<p>生成PDF的前提是安装了texlive，如果要生成中文PDF，还需要确认安装了东亚语言包和字体包(texlive-lang-cjk, texlive-fonts-recommands之类）。</p>
<p>然后配置conf.py，在latex_elements中加入:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>latex_elements = {
# The paper size (&#39;letterpaper&#39; or &#39;a4paper&#39;).
#&#39;papersize&#39;: &#39;letterpaper&#39;,

# The font size (&#39;10pt&#39;, &#39;11pt&#39; or &#39;12pt&#39;).
#&#39;pointsize&#39;: &#39;10pt&#39;,

# Additional stuff for the LaTeX preamble.
&#39;preamble&#39;: &#39;&#39;&#39;
\\hypersetup{unicode=true}
\\usepackage{CJKutf8}
\\AtBeginDocument{\\begin{CJK}{UTF8}{gbsn}}
\\AtEndDocument{\\end{CJK}}
&#39;&#39;&#39;,
</pre></div>
</div>
<p>最后运行 <code class="docutils literal"><span class="pre">make</span> <span class="pre">latexpdf</span></code> 即可。</p>
</div>
<div class="section" id="rest">
<h2>1.9. reST语法介绍<a class="headerlink" href="#rest" title="永久链接至标题">¶</a></h2>
<p>reStructuredText标记语言比Markdown强大很多，支持多种排版样式。不过这里只介绍开发人员主要会用到的一些样式。reST文档的详细介绍见<a class="reference external" href="http://docutils.sourceforge.net/rst.html">http://docutils.sourceforge.net/rst.html</a></p>
<div class="section" id="id10">
<h3>1.9.1. 章节标题<a class="headerlink" href="#id10" title="永久链接至标题">¶</a></h3>
<p>在文本下一行（或上一行）添加至少与文本长度同宽的符号，即可以使文本成为标题。但并没有规定某一个级别的标题必须用什么字符，可以参考python文档的一些约定:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>* # with overline, for parts
* * with overline, for chapters
* =, for sections
* -, for subsections
* ^, for subsubsections
* &quot;, for paragraphs
</pre></div>
</div>
<p>我们把intro.rst改成下面这样:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>intro
=====

aaa
---
aaaaaaaaaaaa

bbbb
----
bbbbbbbbbbb
</pre></div>
</div>
<p>其中，intro是一级标题，aaa和bbbb是二级标题。生成的html标签分别是&lt;h1&gt;和&lt;h2&gt;。  回到上一级目录重新make html，此时首页index.html效果如下：</p>
<img alt="../_images/doc_head.png" src="../_images/doc_head.png" />
<p>在右边的Contents中，sphinx已经给我们生成了各文件的标题链接，深度为2，深度可以在index.rst中的maxdepth中设置。然而index.html左边的导航里并没有各文件的链接，像intro.html里那样，这个可以通过修改conf.py实现，找到html_sidebars，改为:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">html_sidebars</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;**&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;globaltoc.html&#39;</span><span class="p">,</span> <span class="s1">&#39;sourcelink.html&#39;</span><span class="p">,</span> <span class="s1">&#39;searchbox.html&#39;</span><span class="p">]}</span>
</pre></div>
</div>
<p>修改后保存，重新make html，index.html左边导航变为如下这样：</p>
<img alt="../_images/doc_head2.png" src="../_images/doc_head2.png" />
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">有些主题(theme)会自动完成添加左侧导航的功能</p>
</div>
</div>
<div class="section" id="id11">
<h3>1.9.2. 段落<a class="headerlink" href="#id11" title="永久链接至标题">¶</a></h3>
<p>段落是构成reST文档的基本单位。通过一个或一个以上的空行隔开的文本区块就是一个段落。正如在python里一样，reST中的缩进非常重要。同一段落的多个文本行必须有一样的缩进。</p>
<p>注意在段落内换行并不会在html中生成换行符，要想保持在文本编辑器中的换行符，需要在这些行前面加上|和空格:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>| aaaaaaaa
| bbbbbbbbb
| cccccccccccc
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">如果编写中文reST文档，在编辑器中由于一行文字太长需要强制换行时，记得在行末加\，否则生成的html会在行末和下一行行首之前插入一个空格</p>
</div>
</div>
<div class="section" id="id12">
<h3>1.9.3. 行内标记<a class="headerlink" href="#id12" title="永久链接至标题">¶</a></h3>
<p>行内标记常用的有:</p>
<ul class="simple">
<li>字体加粗 两个星号</li>
<li>字体倾斜 一个星号</li>
<li>代码或内容引用 两个反引号（`）</li>
</ul>
<p>示例:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>aaaa **加粗** aaaaa
aaaa *倾斜* aaaaa
aaaaa ``引用`` aaaaaa
</pre></div>
</div>
<p>效果：</p>
<p>aaaa <strong>加粗</strong> aaaaa
aaaa <em>倾斜</em> aaaaa
aaaaa <code class="docutils literal"><span class="pre">引用</span></code> aaaaaa</p>
<p>注意这些符号在前后不能有非空白字符，否则无法生效。</p>
</div>
<div class="section" id="id13">
<h3>1.9.4. 列表<a class="headerlink" href="#id13" title="永久链接至标题">¶</a></h3>
<ul class="simple">
<li>符号列表 *号后空格</li>
<li>编号列表 数字加点加空格，或者#号加点加空格</li>
<li>定义列表 术语（只能一行）的下一行缩进，下一行为定义内容</li>
</ul>
<p>示例:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>* item
* item
* item

1. item1
2. item2
3. item3

#. item4
#. item5
#. item6

FOO
this is very interesting.

BAR
this is interesting, too.
</pre></div>
</div>
<p>效果：</p>
<ul class="simple">
<li>item</li>
<li>item</li>
<li>item</li>
</ul>
<ol class="arabic simple">
<li>item1</li>
<li>item2</li>
<li>item3</li>
<li>item4</li>
<li>item5</li>
<li>item6</li>
</ol>
<p>FOO
this is very interesting.</p>
<p>BAR
this is interesting, too.</p>
</div>
<div class="section" id="id14">
<h3>1.9.5. 代码<a class="headerlink" href="#id14" title="永久链接至标题">¶</a></h3>
<p>在文档中列出代码是开发人员经常用到的一个功能。在reST文档中列出代码有三种方式：</p>
<ul class="simple">
<li>行内代码 用``code``</li>
<li>简单代码块 在代码块的上一个段落后面加2个冒号，空一行后开始代码块，代码块要缩进</li>
<li>复杂代码块 使用code-block指导语句，还可以选择列出行号和高亮重点行等</li>
</ul>
<p>示例:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>source code below ::

void foo()
{
    int i;

    for(i=0; i&lt;10; i++)
    printf(&quot;i: %d\n&quot;, a);
}

source code again

.. code-block:: c
    :linenos:
    :emphasize-lines: 3,6

    void foo()
    {
        int i;

        for(i=0; i&lt;10; i++)
        printf(&quot;i: %d\n&quot;, a);
    }
</pre></div>
</div>
<p>效果：</p>
<p>source code below</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>void foo()
{
    int i;

    for(i=0; i&lt;10; i++)
    printf(&quot;i: %d\n&quot;, a);
}
</pre></div>
</div>
<p>source code again</p>
<div class="highlight-c"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">foo</span><span class="p">()</span>
<span class="p">{</span>
<span class="hll">    <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
</span>
    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="hll">    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;i: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">a</span><span class="p">);</span>
</span><span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id15">
<h3>1.9.6. 超链接<a class="headerlink" href="#id15" title="永久链接至标题">¶</a></h3>
<p>主要有两种方式：</p>
<ul class="simple">
<li>行内超链接 语法`链接文字 &lt;URL&gt;`_</li>
<li>分开的超链接 用到链接的地方`链接文字`_, 定义链接的地方 .. _链接文字: URL</li>
<li>记住链接URL要加http://前缀，不要直接从网址开始写。</li>
</ul>
<p>示例:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>visit `baidu &lt;http://www.baidu.com&gt;`_

visit `baidu URL`_

.. _baidu URL: http://www.baidu.com
</pre></div>
</div>
<p>效果：</p>
<p>visit <a class="reference external" href="http://www.baidu.com">baidu</a></p>
<p>visit <a class="reference external" href="http://www.baidu.com">baidu URL</a></p>
</div>
<div class="section" id="id16">
<h3>1.9.7. 图片<a class="headerlink" href="#id16" title="永久链接至标题">¶</a></h3>
<p>使用image指导语句。</p>
<p>示例:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>baidu logo:

.. image:: img/bdlogo.png
    :width: 200px
</pre></div>
</div>
<p>效果：</p>
<p>baidu logo:</p>
<a class="reference internal image-reference" href="../_images/bdlogo.png"><img alt="../_images/bdlogo.png" src="../_images/bdlogo.png" style="width: 200px;" /></a>
<p>也可以使用figure指导语句，figure可以空一行，接着写图片标题。</p>
<p>示例:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>.. figure:: img/bdlogo.png
    :width: 200px

    Baidu LOGO
</pre></div>
</div>
<p>效果：</p>
<div class="figure" id="id24">
<a class="reference internal image-reference" href="../_images/bdlogo.png"><img alt="../_images/bdlogo.png" src="../_images/bdlogo.png" style="width: 200px;" /></a>
<p class="caption"><span class="caption-text">Baidu LOGO</span></p>
</div>
</div>
<div class="section" id="id17">
<h3>1.9.8. 表格<a class="headerlink" href="#id17" title="永久链接至标题">¶</a></h3>
<p>使用文本字符绘制的表格。简单表格用的字符较少，但功能有限，如不能表格行不能换行；复杂不及格使用的字符较多。</p>
<p>示例:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>simple table:

=====  =====  ======
Inputs        Output
------------  ------
A      B      A or B
=====  =====  ======
False  False  False
True   False  True
False  True   True
True   True   True
=====  =====  ======

grid table:

+------------------------+------------+----------+----------+
| Header row, column 1   | Header 2   | Header 3 | Header 4 |
| (header rows optional) |            |          |          |
+========================+============+==========+==========+
| body row 1, column 1   | column 2   | column 3 | column 4 |
+------------------------+------------+----------+----------+
| body row 2             | Cells may span columns.          |
+------------------------+------------+---------------------+
| body row 3             | Cells may  | Table cells         |
+------------------------+ span rows. | contain             |
| body row 4             |            | body elements.      |
+------------------------+------------+---------------------+
</pre></div>
</div>
<p>效果:</p>
<p>simple table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="31%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">Inputs</th>
<th class="head">Output</th>
</tr>
<tr class="row-even"><th class="head">A</th>
<th class="head">B</th>
<th class="head">A or B</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-odd"><td>False</td>
<td>False</td>
<td>False</td>
</tr>
<tr class="row-even"><td>True</td>
<td>False</td>
<td>True</td>
</tr>
<tr class="row-odd"><td>False</td>
<td>True</td>
<td>True</td>
</tr>
<tr class="row-even"><td>True</td>
<td>True</td>
<td>True</td>
</tr>
</tbody>
</table>
<p>grid table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="21%" />
<col width="18%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Header row, column 1
(header rows optional)</th>
<th class="head">Header 2</th>
<th class="head">Header 3</th>
<th class="head">Header 4</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>body row 1, column 1</td>
<td>column 2</td>
<td>column 3</td>
<td>column 4</td>
</tr>
<tr class="row-odd"><td>body row 2</td>
<td colspan="3">Cells may span columns.</td>
</tr>
<tr class="row-even"><td>body row 3</td>
<td rowspan="2">Cells may
span rows.</td>
<td colspan="2" rowspan="2">Table cells
contain
body elements.</td>
</tr>
<tr class="row-odd"><td>body row 4</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id18">
<h3>1.9.9. 引用<a class="headerlink" href="#id18" title="永久链接至标题">¶</a></h3>
<p>一种是传统的参考文献引用格式。</p>
<p>示例:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>It is methioned by [Ref]_ that C++ is good.

.. [Ref] 《zzq&#39;s talk》
</pre></div>
</div>
<p>效果：</p>
<img alt="../_images/doc_ref.png" src="../_images/doc_ref.png" />
<p>类似于书签的引用，被引用的内容可以在另一个reST文档中。在引用的地方, 使用 <code class="docutils literal"><span class="pre">:ref:`bookmark`</span></code> 这种语法，在被引用内容的上方, 使用
<code class="docutils literal"><span class="pre">_bookmark:</span></code> 的语法。下方的标题将变成书签链接的文本。</p>
<p>示例:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>附录 :ref:`ewma_algo` 中也有介绍。

.. _ewma_algo:

EWMA Algo
---------
(被引用的内容）
</pre></div>
</div>
<p>文档间引用，引用另一文档，格式是 <code class="docutils literal"><span class="pre">:doc:`file_name`</span></code> 。</p>
<p>示例:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>sniper知识库格式发生了一些变化，见 :doc:`rule_format` 。
</pre></div>
</div>
</div>
<div class="section" id="id19">
<h3>1.9.10. 脚注<a class="headerlink" href="#id19" title="永久链接至标题">¶</a></h3>
<p>与引用语法类似，只是它在正文中显示的不是文本，而是编号。</p>
<p>示例:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>orem ipsum [#f1]_ dolor sit amet ... [#f2]_

Footnotes

.. [#f1] Text of the first footnote.
.. [#f2] Text of the second footnote.
</pre></div>
</div>
<p>效果：</p>
<img alt="../_images/doc_foot.png" src="../_images/doc_foot.png" />
</div>
<div class="section" id="id20">
<h3>1.9.11. 提醒<a class="headerlink" href="#id20" title="永久链接至标题">¶</a></h3>
<p>可以使用提醒指导语句来添加需要提醒读者注意的说明文字。</p>
<p>示例:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>.. note:: this is a note.

.. warning:: this is a warning.

.. error:: this is an error.
</pre></div>
</div>
<p>效果:</p>
<div class="admonition note">
<p class="first admonition-title">注解</p>
<p class="last">this is a note.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">警告</p>
<p class="last">this is a warning.</p>
</div>
<div class="admonition error">
<p class="first admonition-title">错误</p>
<p class="last">this is an error.</p>
</div>
<p>已实现的提醒指导语句有：</p>
<ul class="simple">
<li>attention</li>
<li>caution</li>
<li>danger</li>
<li>error</li>
<li>hint</li>
<li>important</li>
<li>note</li>
<li>tip</li>
<li>warning</li>
</ul>
</div>
<div class="section" id="id21">
<h3>1.9.12. 替换<a class="headerlink" href="#id21" title="永久链接至标题">¶</a></h3>
<p>替换类似脚注，在正文中使用|text|这样标签，然后可以设定使用其他文本或者图片来代替text这个占位符。</p>
<p>示例:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>I like eat |apple| very much.

.. |apple| replace:: 苹果
</pre></div>
</div>
<p>效果:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>I like eat 苹果 very much.
</pre></div>
</div>
</div>
</div>
<div class="section" id="id22">
<h2>1.10. 参考<a class="headerlink" href="#id22" title="永久链接至标题">¶</a></h2>
<table class="docutils citation" frame="void" id="sphinx-site" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[sphinx_site]</td><td><a class="reference external" href="http://sphinx-doc.org/index.html">sphinx-doc官网</a></td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="id23" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[reST]</td><td><a class="reference external" href="http://docutils.sourceforge.net/docs/ref/rst/restructuredtext.html">reStructuredText标记语言规范</a></td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="gen-chn-pdf" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[gen_chn_pdf]</td><td><a class="reference external" href="http://www.tuicool.com/articles/nAJJVb">使用sphinx制作中文PDF</a></td></tr>
</tbody>
</table>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dir_struct.html" class="btn btn-neutral float-right" title="2. 目录结构" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="文档编写指南" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; 版权所有 2016-2017, promise.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.5.3',
            LANGUAGE:'zh_CN',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>